# Tactile-image-recognition-algorithm-based-robot-arm
## 프로젝트 개요
본 프로젝트는 인간 손의 복잡한 동작을 모방하는 로봇 손 개발 및 촉각 이미지 센서를 통한 섬세한 작업기능 구현을 목표로 하였습니다. 

기존의 로봇 손 기술은 손가락 폄근을 제어하는 능력이 부족하며, 이는 실제 손의 섬세한 움직을 구현하는데 한계를 드러내고 있었습니다.
이에 따라 유연한 관절을 기반으로 섬세한 동작을 구현하는 로봇손 및 물건의 촉감을 감지하는 촉감 이미지 센서 개발을 진행하였습니다.

## 개발 목표
- 센서 H/W 제작
- 학습 데이터 수집 및 전처리
- 실시간 힘 추론 알고리즘
- Teensy 4.1 통신 규격 고안
- 로봇 손 S/W 제작

## 시스템 구성
### 하드웨어 주요 구성
- BLDC 모터 * 8개
- Tendon 제작용 Wire
- 카메라 모듈 * 4개
- 실리콘 젤
### 소프트웨어 주요 구성
- 모터 제어 시스템
- 자세 제어 시스템

## 손 관절 구성
![Image](https://github.com/user-attachments/assets/f636a0df-8aa6-47b6-93c9-30374d603871)
- 실제 손과 크기 비교
## 핀 맵 및 3D 모델
<img width="3508" height="2480" alt="Image" src="https://github.com/user-attachments/assets/5fdc5987-e028-4c2c-b5dd-37bf7040376b" />
- 마스터 모델 핀맵

<img width="2352" height="1560" alt="Image" src="https://github.com/user-attachments/assets/1dcf9d3c-4ea1-434c-bf27-8e67c96ad2a5" />
- 슬레이브 모델 핀맵

<img width="1724" height="938" alt="Image" src="https://github.com/user-attachments/assets/b33e6b99-3463-4612-ae73-cb7e81c34e63" />
- 마스터 모델 3D 모델
  

## 관절 구동을 위한 모터 플랫폼 구현
![Image](https://github.com/user-attachments/assets/91d342aa-11f9-43c9-b8cb-103e028a1d29)
- 마스터 모델과 BLDC 모터 연결.


![Image](https://github.com/user-attachments/assets/951c3bad-1cb0-4d06-87db-22eef46e52ed)
- 관절 구동 BLDC 모터를 3D프린터로 뽑은 기어를 통해 구동하고자, 기어 플랫폼 제작.

## 주요 관절 제작 및 힘줄 구현
<img width="452" height="481" alt="Image" src="https://github.com/user-attachments/assets/969e25e7-a70e-4926-8a75-3358317789b6" />
<img width="452" height="481" alt="Image" src="https://github.com/user-attachments/assets/00627a68-7e18-4b27-a3ea-912c5ecd0545" />

- <좌| 주요관절 3D프린터 제작>
- <우| 관절에 근육처럼 움직일 수 있도록, 의료테이프 부착>

## 본인 담당 역할 및 구현 역량

### 담당 범위
관절 위치 제어 알고리즘 설계 및 펌웨어 구현, 하드웨어 핀 맵 설계에 참여하였습니다.

### 주요 구현 내용
- **인터럽트 기반 홀 센서 위치 추적**: `attachInterrupt(HALL_A, hallA_ISR, RISING)`으로 메인 루프 폴링 없이 Rising Edge마다 즉시 엔코더 카운트 갱신
- **방향 판별 로직**: ISR 내에서 `HALL_B` 상태를 읽어 정방향(`encoderCount++`) / 역방향(`encoderCount--`) 결정 (Quadrature 디코딩 방식)
- **`volatile` 키워드 활용**: 인터럽트 서비스 루틴(ISR)과 메인 루프 간 `encoderCount` 공유 시 컴파일러 최적화로 인한 변수 캐시 문제 방지
- **오차 기반 위치 제어 설계**: `error = targetPosition - encoderCount` 계산, ±10 카운트 deadband 적용으로 미세 진동 방지 정지 구간 구현
- **노이즈 대응**: FOC 드라이버 보드 EMI 환경에서 `INPUT_PULLUP` 내부 풀업 저항 설정으로 홀 센서 오입력 방지
- **디버깅 인터페이스**: 9600 baud Serial 출력으로 실시간 `encoderCount` 모니터링, 제어 루프 검증
- **마스터-슬레이브 Teensy 4.1 구조 설계 참여**: 8관절 독립 제어를 위한 보드 간 통신 구조 및 핀 맵 설계

### 핵심 기술 판단
- 폴링 방식 대신 인터럽트 방식 채택: 10ms 루프 지연 내에서도 빠른 모터 회전 펄스 누락 방지
- 단순 Bang-bang 제어에서 deadband 도입: 목표 위치 근방 진동(chattering) 억제

## 동작 로직
<img width="270" height="628" alt="image" src="https://github.com/user-attachments/assets/23705ea9-afd9-4d58-bb92-a9922a9c482e" />

- 제어 판단 기준은 “목표 위치 대비 오차(error)” 단일 조건
> - error = targetPosition - encoderCount
> - |error| < 10이면 도착으로 간주하고 정지

- 정지/구동이 2단계 분기 구조라 로직이 단순함
> - 1차: |error| < 10 ? → 정지 vs 계속 구동
> - 2차: error > 0 ? → 정방향 vs 역방향

- 속도 제어는 고정 PWM(예: 120)로 구현되어 응답이 일정함
> - 오차 크기에 따라 PWM을 바꾸는 가변 제어(PID 등) 없이, 일정 출력으로 목표로 접근

- 위치 피드백은 홀센서 인터럽트 기반이라 반응이 빠름
> - 루프에서 폴링이 아니라 ISR에서 즉시 encoderCount를 갱신
> - HALL_A 상승엣지 + HALL_B 상태로 방향 판별(증가/감소)

- 루프는 짧은 주기(delay 10ms)로 반복하며 상태를 계속 갱신
> - “오차 계산 → 방향 결정 → PWM 출력 → 반복” 구조로 계속 추적

- 정지 방식은 “PWM=0” 중심(구동 차단)
> - 파일 기준으로는 능동 제동(역토크/쇼트 브레이크) 로직은 별도로 없음(필요하면 추가 구현 가능)

## 회로 설계 개요
회로 설계 개요

- 중앙 제어부: Teensy 4.1
> - 로봇 손 동작 제어를 위한 Teensy 4.1 보드를 사용, Arduino IDE에서 센서 입력 처리 및 모터 제어 코드를 작성한 구조

- 구동부: BLDC 모터 + FOC 모터 제어 보드
> - BLDC를 정밀/고효율 구동을 위한 FOC(Feld Oriented Control) 방식의 모터 제어 보드를 직접 설계하여 적용한 구성 

- 피드백 입력: Hall Sensor(속도/회전 감지)
> - 모터 상태(회전/방향/속도) 판단을 위해 Hall Sensor 신호를 입력으로 받아 제어에 반영하는 구조(FOC/BLDC 구성에서 핵심 피드백)

- 사용자 입력: 버튼 기반 자세 제어
> - 여러 모터 동시 제어의 한계를 보완하기 위해 버튼으로 특정 자세를 선택/제어하는 입력부를 추가한 방식

- 출력(제어 신호) 구성 요약
> - 제어부(Teensy) → 구동부(FOC 드라이버)로 구동 명령(예: PWM/방향 또는 FOC 제어 입력) 전달
> - 입력부(Hall/버튼) → 제어부로 들어와 닫힌고리(피드백) 제어 형태를 이룸

## 프로젝트 결론
### 실험 결과 요약
- 로봇 손(암) 구동을 위해 Teensy 4.1 기반 제어부 + BLDC 모터 + FOC 모터 제어 보드를 구성하고, 센서 입력을 바탕으로 구동 확인
- Hall 센서 기반 회전/방향 피드백을 통해 모터 상태를 추적하며 목표 동작을 수행하는 구조를 구현
- 다자유도(여러 관절) 운용에서 제어 복잡도가 증가, 버튼 입력을 활용한 자세 선택/동작 제어 방식을 적용하여 실제 운용 가능성을 높임

### 분석 및 한계
- Hall 센서는 속도/방향 파악에는 유리하지만, "정밀 위치 제어(절대각/관절각)"에는 한계가 있어 관절 위치 오차가 누적
- FOC 제어 보드를 설계시, 전원 노이즈/EMI, 전류 측정 오차, 게이트 구동 안정성 같은 하드웨어 요인이 성능에 크게 영향

### 향후 개선 방향
- 목표 근처에서 안정적으로 멈추도록 가변 속도 제어(오차 크기에 따른 PWM 조절) 또는 PID 제어를 적용해 정착 시간을 줄이고 진동을 완화
- FOC 안정화를 위해 전류 센싱 정확도 개선, 필터링, 데드타임/게이트 드라이브 최적화를 수행하고, 배선/그라운드/차폐를 포함한 노이즈 대책을 강화
- 다관절 확장을 위해 모듈화(모터별 제어 모듈), 제어 주기 고정(타이머 기반), 상태머신 설계로 소프트웨어 구조를 정리
- 사용성 측면에서 버튼 기반을 넘어 동작 프리셋/시나리오 제어, 안전 정지 조건, UI(시리얼/앱) 연동을 추가

### 프로젝트 의의
- 상용 모듈 의존이 아니라, FOC 기반 BLDC 제어 보드를 직접 설계/적용하고 실제 구동까지 연결해 본 점에서 하드웨어-펌웨어 통합 역량을 확보
- Hall 센서 피드백을 이용해 "기본적인 폐루프 제어 구조(피드백 → 판단 → 구동)"를 구현하며 로봇 관절 제어의 핵심 흐름을 실습 기반으로 검증

---

## 디지털 포렌식 연계 및 AI 확장 가능성

### 디지털 포렌식과의 연결

- **임베디드 장치 포렌식**: ISR(인터럽트 서비스 루틴) 기반 이벤트 추적 구조 설계 경험 → 임베디드 장치 내부 실행 흐름 역추적 및 비인가 접근 흔적 분석에 직접 적용 가능
- **하드웨어 취약점 분석**: FOC 드라이버 보드의 EMI 노이즈가 제어 신호에 미치는 영향을 직접 경험 → 하드웨어 레이어 공격(글리칭, 전압 조작) 분석의 기초
- **펌웨어 역분석**: `volatile` 변수, 인터럽트 핀 매핑, PWM 제어 로직 등 저수준 펌웨어 구조를 직접 설계한 경험 → 펌웨어 리버싱 시 동일한 패턴 인식 가능

### IoT 보안 취약점 관점
- Teensy-FOC 드라이버 간 제어 신호가 암호화 없이 전송되는 구조 → **물리적 접근 후 제어 신호 도청/변조** 가능성 직접 인지
- 버튼 기반 입력부가 유일한 사용자 인터페이스 → **물리 접근 제어 부재** 취약점

### AI 확장 가능성
- **촉각 이미지(실리콘 겔 접촉 압력 분포 시각화) 분석** → 접촉 흔적·지문·압흔 등 물리 증거의 AI 분류 모델 연구로 직접 확장 가능
- 카메라 4개 기반 다중 뷰 촉각 데이터 → **멀티모달 증거 분석 AI** 연구 주제
